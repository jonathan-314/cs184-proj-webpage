<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 184 Cloth Sim</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 184: Computer Graphics and Imaging, Spring 2023</h1>
<h1 align="middle">Project 4: Cloth Sim</h1>
<h2 align="middle">Jonathan Guo, Wentinn Liao, cs184-wljg</h2>

<br><br>

<div>

<h2 align="middle">Overview</h2>
<p>In this project, we implemented reflection and reflaction as well as depth of focus using the thin lens camera model. In <strong>Part I</strong>, reflection was straightforward, while refraction required more computation and case checking to determine whether refraction or total internal reflection occurred. We encountered minor problems with the PDF of refraction, which should be 1 since refraction angle is unique, and with glass BSDF, forgetting to take the absolute value of cosine theta. This allowed us to render refractive and reflective materials such as glass and metal. For <strong>Part IV</strong>, computation of the correct vectors was relatively straightforward, with a minor error in forgetting to add the position of the camera to the ray origin. This part allowed us to render with focus on various depths of the scene, which gives a nice visual effect.</p>


<h2 align="middle">Part I: Masses and Springs</h2>

<p>Shown below are images of the scene 2 wireframe. It is difficult to discern between structural and bending constraints since they are both horizontal or vertical. The top left and bottom right images both show all the constraints, while the top right image shows only shearing constraints which are diagonal and the bottom left image shows only structural and bending constraints which are horizontal and vertical.

<div align="middle">
    <table>
        <tr>
            <td>
                <img src="images/Task 1/pinned2.png" align="middle" width="400px"/>
                <figcaption align="middle">Pinned 2 wireframe.</figcaption>
            </td>
            <td>
                <img src="images/Task 1/Only Shearing Constraints.png" align="middle" width="400px"/>
                <figcaption align="middle">Pinned 2 with only shearing constraints.</figcaption>
            </td>
        </tr>
        <tr>
            <td>
                <img src="images/Task 1/Without Shearing Constraints.png" align="middle" width="400px"/>
                <figcaption align="middle">Pinned 2 without shearing constraints.</figcaption>
            </td>
            <td>
                <img src="images/Task 1/All Constraints.png" align="middle" width="400px"/>
                <figcaption align="middle">Pinned 2 with all constraints.</figcaption>
            </td>
        </tr>
    </table>
</div>


<h2 align="middle">Part II: Simulation via Numerical Integration</h2>

<p>Below are images of <em>pinned2</em> with high and low spring constants of <strong>100000 N/m</strong> and <strong>200 N/m</strong> as opposed to the default of <strong>5000 N/m</strong>. A high spring constant will increase internal tension and make the cloth much more rigid and less flexible, and as we can see on the left the cloth is barely allowed to stretch near the top. In contrast, a low spring constant makes the cloth much more flexible and susceptible to gravity, which is why the cloth continues to stretch downwards on the right.</p>

<div align="middle">
    <table>
        <tr>
            <td>
                <img src="images/Task 2/High Spring Constant.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with high spring constant.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Default.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with default spring constant.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Low Spring Constant.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with low spring constant.</figcaption>
            </td>
        </tr>
    </table>
</div>

<p>Below are images of <em>pinned2</em> with high and low densities of <strong>500 g/cm^2</strong> and <strong>2 g/cm^2</strong> as opposed to the default of <strong>15 g/cm^2</strong>. Density behaves in an inverse manner to spring constant because the kinematics of the cloth are determined by the spring force in proportion to gravity. Since the spring force is independent of mass, as the mass increases, the spring force becomes less in proportion meaning the kinematics are primarily dominated by gravity, which explains why the cloth stretches in the left image. In contrast, a low density means the spring force becomes greater in proportion meaning the kinematics are primarily dominated by the internal tension of the cloth, which explains its more rigid appearance in the right image.</p>

<div align="middle">
    <table>
        <tr>
            <td>
                <img src="images/Task 2/High Density.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with high density.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Default.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with default density.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Low Density.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with low density.</figcaption>
            </td>
        </tr>
    </table>
</div>

<p>Below are images of <em>pinned2</em> with high and low damping of <strong>1.00</strong> and <strong>0.00</strong> as opposed to the default of <strong>0.20</strong>. The damping determines what proportion of the kinetic energy is lost as heat, and therefore, high damping means momentum is lost easily and the cloth moves very slowly. As seen in the left image, the cloth is very slow to change, and at the end of the simulation does falls directly into its vertical position and does not recoil. In contrast, low damping means there is almost no loss of energy and momentum domination, and allowing the cloth to fall causes it to oscillate back and forth across the vertical plane, making some nice contortions due to randomness as seen on the right.</p>

<div align="middle">
    <table>
        <tr>
            <td>
                <img src="images/Task 2/High Damping.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with high damping.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Default.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with default damping.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/Low Damping.png" align="middle" width="320px"/>
                <figcaption align="middle">Pinned 2 with low damping.</figcaption>
            </td>
        </tr>
    </table>
</div>

<p> Shown below is the <em>pinned4</em> configuration in its final resting state with default parameters.</p>

<div align="middle">
    <table>
        <tr>
            <td>
                <img src="images/Task 2/pinned4.png" align="middle" width="500px"/>
                <figcaption align="middle"><em>scene/pinned4.json</em> in its final resting state.</figcaption>
            </td>
            <td>
                <img src="images/Task 2/pinned4 2.png" align="middle" width="500px"/>
                <figcaption align="middle"><em>scene/pinned4.json</em> in its final resting state.</figcaption>
            </td>
        </tr>
    </table>
</div>


<h2 align="middle">Part IV: Depth of Field</h2>

<p>The pinhole model assumes no reflective nor refractive material between the camera and the scene, and therefore all rays that sample a point must travel directly from the camera to the scene. However, for a thin lens model, light can refract from the scene through the lens to the camera, which means the scene at the camera is now an integral over many different rays. When an object is at the point of focus, this can be seen as an average of views of the object at different angles. However when the object is not in focus, then the rays converge either in front or behind the object, which causes the pixel to produce an average of the scene in near proximity of the object. This produces a blur of objects that are further away from the focal distance.</p>

<p>The photos below all have 256 samples per pixel, 4 per light, and aperture width 0.23. 
<div align="middle">
	<table>
		<tr>
            <td>
                <img src="images/Task 4/dragon_d_3.65.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: depth 3.65; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
            <td>
                <img src="images/Task 4/dragon_d_3.98.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: depth 3.98; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
        </tr>
        <tr>
            <td>
                <img src="images/Task 4/dragon_d_4.22.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: depth 4.22; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
            <td>
                <img src="images/Task 4/dragon_d_5.08.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: depth 5.08; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
        </tr>
    </table>
</div>

<p>The photos below all have 256 samples per pixel, 4 per light, and focal depth 3.98.  
<div align="middle">
	<table>
		<tr>
            <td>
                <img src="images/Task 4/dragon_b_0.16.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: aperture 0.16; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
            <td>
                <img src="images/Task 4/dragon_b_0.24.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: aperture 0.24; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
        </tr>
        <tr>
            <td>
                <img src="images/Task 4/dragon_b_0.32.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: aperture 0.32; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
            <td>
                <img src="images/Task 4/dragon_b_0.40.png" align="middle" width="400px"/>
                <figcaption align="middle"><em>Dragon: aperture 0.40; dae/sky/CBdragon.dae</em>.</figcaption>
            </td>
        </tr>
    </table>
</div>


</body>
</html>
